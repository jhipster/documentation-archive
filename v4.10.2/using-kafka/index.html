<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#353d47">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#353d47">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-status-bar-style" content="#353d47">
    <title>Using Kafka</title>

    <!-- Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Lato:300,400,700,900' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet" type="text/css">

    <!-- CSS Libs -->
    <link rel="stylesheet" type="text/css" href="/documentation-archive/v4.10.2/lib/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/documentation-archive/v4.10.2/lib/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/documentation-archive/v4.10.2/lib/css/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/documentation-archive/v4.10.2/lib/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="/documentation-archive/v4.10.2/lib/css/dataTables.bootstrap.css">
    <!-- CSS App -->
    <link rel="stylesheet" type="text/css" href="/documentation-archive/v4.10.2/css/style.css">
    <link rel="stylesheet" type="text/css" href="/documentation-archive/v4.10.2/css/themes/flat-blue.css">
    
    <!-- Bootstrap Docs CSS subset to get icon -->
    <!--<link href="/css/bootstrap-docs.css" rel="stylesheet">-->

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Favicon with QHD -->
    <link rel="icon" type="image/png" href="/documentation-archive/v4.10.2/images/logo/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/documentation-archive/v4.10.2/images/logo/favicon-16x16.png" sizes="16x16" />
<meta name="robots" content="noindex">
</head>

<body class="flat-blue">
    <div class="app-container expanded ">
        <div class="row content-container">
            <nav class="navbar navbar-inverse navbar-fixed-top navbar-top">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <button type="button" class="navbar-expand-toggle fa-rotate-90">
                            <i class="fa fa-bars icon"></i>
                        </button>
                        <ol class="breadcrumb navbar-breadcrumb">
                            <li class="active"></li>
                        </ol>
                        <button type="button" class="navbar-right-expand-toggle pull-right visible-xs">
                            <i class="fa fa-th icon"></i>
                        </button>
                    </div>
                    <ul class="nav navbar-nav navbar-right">
                        <button type="button" class="navbar-right-expand-toggle pull-right visible-xs light">
                            <i class="fa fa-times icon"></i>
                        </button>
                        
                        <li class="">
                            <a href="https://www.google.com/search?q=site:www.jhipster.tech" target="_blank">Search</a>
                        </li>
                        <li class="">
                            <a href="https://github.com/jhipster/generator-jhipster" class="dropdown-toggle navlink" target="_blank" role="button"><i class="fa fa-github fa-2x"></i></a>
                        </li>
                    </ul>

                </div>
            </nav>
            <div class="side-menu sidebar-inverse">
                <nav class="navbar navbar-default" role="navigation">
                    <div class="side-menu-container">
                        <div class="navbar-header">
                            <a class="navbar-brand" href="/">
                                <div class="icon"><img src="/documentation-archive/v4.10.2/images/logo/logo-jhipster2x.png" height="50px"></div>
                                <div class="title brand">JHipster </div>
                            </a>
                            <button type="button" class="navbar-expand-toggle pull-right visible-xs">
                                <i class="fa fa-times icon"></i>
                            </button>
                        </div>
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="/">
                                    <span class="icon fa fa-home"></span><span class="title">Home</span>
                                </a>
                            </li>
                            <li >
                                <a href="/documentation-archive/v4.10.2/releases/">
                                    <span class="icon fa fa-file-text-o"></span><span class="title">Release notes</span>
                                </a>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-1">
                                    <span class="icon fa fa-road"></span><span class="title">JHipster in a few minutes</span>
                                </a>
                                <!-- Dropdown level 1 -->
                                <div id="dropdown-1" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v4.10.2/tech-stack/"><i class="fa fa-fw fa-stack-overflow"></i> Technology stack</a></li>
                                            <li ><a href="/presentation" target="_blank"><i class="fa fa-fw fa-desktop"></i> Official JHipster slides</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/screenshots/"><i class="fa fa-fw fa-picture-o"></i> JHipster in 5 screenshots</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/video-tutorial/"><i class="fa fa-fw fa-film"></i> Video tutorial (12 minutes)</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/companies-using-jhipster/"><i class="fa fa-fw fa-thumbs-up"></i> Companies using JHipster</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/showcase/"><i class="fa fa-fw fa-file-image-o"></i> Showcase of JHipster apps</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-2">
                                    <span class="icon fa fa-fw fa-wrench"></span><span class="title">Setting up your environment</span>
                                </a>
                                <!-- Dropdown level 1 -->
                                <div id="dropdown-2" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v4.10.2/installation/"><i class="fa fa-fw fa-cloud-download"></i> Installing JHipster</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/configuring-a-corporate-proxy/"><i class="fa fa-fw fa-exchange"></i> Configuring a proxy</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/configuring-ide/"><i class="fa fa-fw fa-keyboard-o"></i> Configuring your IDE</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/docker-compose/"><i class="fa fa-fw fa-music"></i> Docker Compose</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/shell-plugins/"><i class="fa fa-fw fa-terminal"></i> Shell Plugins</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-3"><span class="icon fa fa-fw fa-list-ol"></span><span class="title">Core JHipster tasks</span></a>
                                <div id="dropdown-3" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v4.10.2/creating-an-app/"><i class="fa fa-fw fa-rocket"></i> Creating an application</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/creating-an-entity/"><i class="fa fa-fw fa-bolt"></i> Creating an entity</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/creating-a-spring-controller/"><i class="fa fa-fw fa-bolt"></i> Creating a Spring controller</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/creating-a-spring-service/"><i class="fa fa-fw fa-bolt"></i> Creating a Spring service</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/using-dtos/"><i class="fa fa-fw fa-briefcase"></i> Creating DTOs</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/managing-relationships/"><i class="fa fa-fw fa-sitemap"></i> Managing relationships</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/installing-new-languages/"><i class="fa fa-fw fa-flag"></i> Internationalization</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/upgrading-an-application/"><i class="fa fa-fw fa-refresh"></i> Upgrading an application</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-4"><span class="icon fa fa-fw fa-sitemap"></span><span class="title">Microservices</span></a>
                                <div id="dropdown-4" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v4.10.2/microservices-architecture/"><i class="fa fa-fw fa-map-signs"></i> Overview</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/api-gateway/"><i class="fa fa-fw fa-exchange"></i> API Gateway</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/traefik/"><i class="fa fa-fw fa-exchange"></i> Traefik</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/jhipster-registry/"><i class="fa fa-fw  fa-dashboard"></i> JHipster Registry</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/consul/"><i class="fa fa-fw fa-bullseye"></i> Consul</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/using-uaa/"><i class="fa fa-fw fa-lock"></i> JHipster UAA</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/creating-microservices/"><i class="fa fa-fw fa-bolt"></i> Creating microservices</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/microservices-in-production/"><i class="fa fa-fw fa-cloud"></i> Microservices in production</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-5"><span class="icon fa fa-fw fa-puzzle-piece"></span><span class="title">Options</span></a>
                                <div id="dropdown-5" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v4.10.2/security/"><i class="fa fa-fw fa-lock"></i> Securing your app</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/entities-filtering/"><i class="fa fa-fw fa-filter"></i> Filtering your entities</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/using-elasticsearch/"><i class="fa fa-fw fa-search"></i> Using Elasticsearch</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/using-websockets/"><i class="fa fa-fw fa-envelope"></i> Using Websockets</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/doing-api-first-development/"><i class="fa fa-fw fa-file-text"></i> Doing API-First development</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/using-cache/"><i class="fa fa-fw fa-line-chart"></i> Using a cache</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/using-oracle/"><i class="fa fa-fw fa-archive"></i> Using Oracle</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/using-mongodb/"><i class="fa fa-fw fa-leaf"></i> Using MongoDB</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/using-cassandra/"><i class="fa fa-fw fa-eye"></i> Using Cassandra</a></li>
                                            <li class="active" ><a href="/documentation-archive/v4.10.2/using-kafka/"><i class="fa fa-fw fa-envelope"></i> Using Kafka</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-6"><span class="icon fa fa-fw fa-code"></span><span class="title">Development</span></a>
                                <div id="dropdown-6" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v4.10.2/development/"><i class="fa fa-fw fa-code"></i> Using in development</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/profiles/"><i class="fa fa-fw fa-group"></i> Managing profiles</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/common-application-properties/"><i class="fa fa-fw fa-flask"></i> Common application properties</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/separating-front-end-and-api/"><i class="fa fa-fw fa-unlink"></i> Separating front-end and API</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/using-angularjs/"><i class="fa fa-fw fa-html5"></i> Using AngularJS</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/using-angular/"><i class="fa fa-fw fa-html5"></i> Using Angular</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/customizing-bootstrap-3/"><i class="fa fa-fw fa-css3"></i> Customizing Bootstrap 3</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/customizing-bootstrap-4/"><i class="fa fa-fw fa-css3"></i> Customizing Bootstrap 4</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-7"><span class="icon fa fa-fw fa-umbrella"></span><span class="title">Test &amp; QA</span></a>
                                <div id="dropdown-7" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v4.10.2/running-tests/"><i class="fa fa-fw fa-shield"></i> Running tests</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/code-quality/"><i class="fa fa-fw fa-diamond"></i> Code quality</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/setting-up-ci/"><i class="fa fa-fw fa-stethoscope"></i> Continuous Integration</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-8"><span class="icon fa fa-fw fa-cloud"></span><span class="title">Production</span></a>
                                <div id="dropdown-8" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v4.10.2/production/"><i class="fa fa-fw fa-play-circle"></i> Using in production</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/monitoring/"><i class="fa fa-fw fa-line-chart"></i> Monitoring</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/docker-hub/"><i class="fa fa-fw fa-cloud-upload"></i> Docker Hub</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/cloudfoundry/"><i class="fa fa-fw fa-cloud-upload"></i> Deploying to Cloud Foundry</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/heroku/"><i class="fa fa-fw fa-cloud-upload"></i> Deploying to Heroku</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/kubernetes/"><i class="fa fa-fw fa-cloud-upload"></i> Deploying to Kubernetes</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/openshift/"><i class="fa fa-fw fa-cloud-upload"></i> Deploying to OpenShift</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/rancher/"><i class="fa fa-fw fa-cloud-upload"></i> Deploying to Rancher</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/aws/"><i class="fa fa-fw fa-cloud-upload"></i> Deploying to AWS</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/boxfuse/"><i class="fa fa-fw fa-cloud-upload"></i> Deploying with Boxfuse</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-9"><span class="icon fa fa-fw fa-cubes"></span><span class="title">Modules</span></a>
                                <div id="dropdown-9" class="panel-collapse collapse" style="height: 0px;">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v4.10.2/modules/marketplace/"><i class="fa fa-fw fa-shopping-cart"></i> Marketplace</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/modules/creating-a-module/"><i class="fa fa-fw fa-cube"></i> Creating a module</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-10"><span class="icon fa fa-fw fa-wrench"></span><span class="title">Tools</span></a>
                                <div id="dropdown-10" class="panel-collapse collapse" style="height: 0px;">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v4.10.2/jdl/"><i class="fa fa-fw fa-star"></i> JDL</a></li>
                                            <li><a href="/documentation-archive/v4.10.2/jdl-studio/"><i class="fa fa-fw fa-terminal"></i> JDL Studio</a></li>
                                            <li >
                                                <a href="/documentation-archive/v4.10.2/jhipster-ide/"><i class="fa fa-fw fa-object-group"></i> JHipster IDE</a></li>
                                            <li >
                                                <a href="/documentation-archive/v4.10.2/jhipster-uml/"><i class="fa fa-fw fa-magic"></i> JHipster-UML</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li ><a href="/documentation-archive/v4.10.2/tips/"><span class="icon fa fa-fw fa-cogs"></span><span class="title">Tips'n tricks</span></a></li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-11"><span class="icon fa fa-fw fa-question"></span><span class="title">Getting help</span></a>
                                <div id="dropdown-11" class="panel-collapse collapse" style="height: 0px;">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v4.10.2/help/"><i class="fa fa-fw fa-users"></i> Community help</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/consulting/"><i class="fa fa-fw fa-user-md"></i> Professional help</a></li>
                                            <li ><a href="/documentation-archive/v4.10.2/training/"><i class="fa fa-fw fa-graduation-cap"></i> Training</a></li>
                                        </ul>
                                     </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <!-- /.navbar-collapse -->
                </nav>
            </div>
            <!-- Main Content -->


            <div id="page-wrapper" class="container-fluid">
                <div class="side-body" id="page-top">
                    
                    <div class="row page-content-wrapper">
                        <div class="col-lg-12">
                            <h1 id="-using-kafka"><i class="fa fa-envelope"></i> Using Kafka</h1>

<h2 id="features">Features</h2>

<p><a href="http://kafka.apache.org/">Kafka</a> is a popular publish-subscribe messaging system. JHipster has an optional support for Kafka, that will:</p>

<ul>
  <li>Configure <a href="https://cloud.spring.io/spring-cloud-stream/">Spring Cloud Stream</a> with JHipster.</li>
  <li>Add the necessary configuration in the <code class="highlighter-rouge">application-*.yml</code> files to have a sample <code class="highlighter-rouge">topic-jhipster</code> topic, and to have an healthcheck monitor for Kafka (which will be available in the <code class="highlighter-rouge">health</code> administration screen).</li>
  <li>Generate a Docker Compose configuration file, with the sample <code class="highlighter-rouge">topic-jhipster</code> topic, so Kafka is usable by simply typing <code class="highlighter-rouge">docker-compose -f src/main/docker/kafka.yml up -d</code>.</li>
  <li>Provide support for Kafka in a microservice environment, when using Docker. The Docker Compose sub-generator will generate a specific Kafka configuration, if one microservice or one gateway uses Kafka. All microservices and gateways will then use that Kafka broker for all their messages. The broker is common for all applications, as it is typically used as a message broker between applications.</li>
</ul>

<h2 id="tutorial-on-using-kafka-with-spring-cloud-stream-in-a-jhipster-application">Tutorial on using Kafka with Spring Cloud Stream in a JHipster application</h2>

<h3 id="prerequisite">Prerequisite</h3>

<p>Generate a new application and make sure to select <code class="highlighter-rouge">Asynchronous messages using Apache Kafka</code> when prompted for technologies you would like to use. A Docker Compose configuration file is generated and you can start Kafka with the command:</p>

<p><code class="highlighter-rouge">docker-compose -f src/main/docker/kafka.yml up -d</code></p>

<h3 id="model">Model</h3>

<p>Create a simple model to represent the messages we would be sending through a Kafka topic.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public class Greeting {
    private String message;

    public Greeting() {
    }

    public String getMessage() {
        return message;
    }

    public Greeting setMessage(String message) {
        this.message = message;
        return this;
    }
}

</code></pre></div></div>

<h3 id="message-channels">Message Channels</h3>

<p>Spring Cloud Stream introduced an abstraction layer called <code class="highlighter-rouge">message channels</code>. Producers sends messages to output channels, and consumers subscribes to input channels for messages.  This gives you the flexibility to work with different messaging systems (called binders) without writing a lot of platform-specific code.</p>

<p>Let’s create our output and input channels.</p>

<h5 id="output-channel">Output channel</h5>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public interface ProducerChannel {

    String CHANNEL = "messageChannel";

    @Output
    MessageChannel messageChannel();
}
</code></pre></div></div>

<h5 id="input-channel">Input channel</h5>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public interface ConsumerChannel {

    String CHANNEL = "subscribableChannel";

    @Input
    SubscribableChannel subscribableChannel();
}
</code></pre></div></div>

<h3 id="configuration">Configuration</h3>

<p>We need to tell Spring Cloud Stream about our channels in the configuration class generated by Jhipster.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@EnableBinding(value = {Source.class, ProducerChannel.class, ConsumerChannel.class})
public class MessagingConfiguration {

}
</code></pre></div></div>

<p>We also need to configure our application to talk to Kafka.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>spring:
    cloud:
      stream:
        bindings:
            messageChannel:
                destination: greetings
                content-type: application/json
            subscribableChannel:
                destination: greetings

</code></pre></div></div>

<p>This corresponds to:</p>

<p><code class="highlighter-rouge">spring.cloud.stream.bindings.&lt;channelName&gt;.destination.&lt;topic&gt;</code></p>

<h3 id="producer-and-consumer">Producer and Consumer</h3>

<h5 id="producer-resource">Producer Resource</h5>
<p>Let’s create a simple REST endpoint that we can invoke to send messages to the Kafka topic, <code class="highlighter-rouge">greetings</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
@RestController
@RequestMapping("/api")
public class ProducerResource{

    private MessageChannel channel;

    public ProducerResource(ProducerChannel channel) {
        this.channel = channel.messageChannel();
    }

    @GetMapping("/greetings/{count}")
    @Timed
    public void produce(@PathVariable int count) {
        while(count &gt; 0) {
            channel.send(MessageBuilder.withPayload(new Greeting().setMessage("Hello world!: " + count)).build());
            count--;
        }
    }

}
</code></pre></div></div>

<h5 id="consumer-service">Consumer Service</h5>

<p>We can consume the messages using <code class="highlighter-rouge">StreamListener</code> for message mapping and automatic type conversion.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Service
public class ConsumerService {

    private final Logger log = LoggerFactory.getLogger(ConsumerService.class);


    @StreamListener(ConsumerChannel.CHANNEL)
    public void consume(Greeting greeting) {
        log.info("Received message: {}.", greeting.getMessage());
    }
}

</code></pre></div></div>

<h3 id="running-the-app">Running the app</h3>

<p>Allow access to the endpoint in <code class="highlighter-rouge">SecurityConfiguration.java</code>:</p>

<p><code class="highlighter-rouge">.antMatchers("/api/greetings/**").permitAll()</code></p>

<p>If you invoke the endpoint <code class="highlighter-rouge">http://localhost:8080/api/greetings/5</code>, you should see the messages logged to the console.</p>

<p>You can find the full source code on <a href="https://github.com/eosimosu/jhipster-kafka">eosimosu/jhipster-kafka</a>.</p>


                        </div>
                    </div>
                    <!-- /.row -->
                    

                    <!-- Footer -->
                    <footer class="text-center">
                        <div class="footer-above">
                            <div class="container">
                                <div class="row">
                                    <div class="footer-col col-md-4">
                                        <div class="col-md-4 col-sm-12">
                                            <h5 class="text-left"><i class="fa fa-coffee fa-fw"></i> <a class="link" href="/documentation-archive/v4.10.2/team/">Team</a></h5>
                                            <h5 class="text-left"><i class="fa fa-pencil fa-fw"></i> <a class="link" href="/documentation-archive/v4.10.2/artwork">Artwork</a></h5>
                                        </div>
                                        <div class="col-md-4 col-sm-12">
                                            <h5 class="text-left"><i class="fa fa-gavel fa-fw"></i> <a class="link" href="/documentation-archive/v4.10.2/policies/">Policies</a></h5>
                                            <h5 class="text-left"><i class="fa fa-gift fa-fw"></i> <a class="link" href="/documentation-archive/v4.10.2/thanks/">Thanks</a></h5>
                                        </div>
                                        <div class="col-md-4 col-sm-12">
                                            <h5 class="text-left"><i class="fa fa-meetup fa-fw"></i> <a class="link" href="/documentation-archive/v4.10.2/meetups/">Meetups</a></h5>
                                            <h5 class="text-left"><i class="fa fa-archive fa-fw"></i> <a class="link" href="/documentation-archive/v4.10.2/documentation-archive/">Archives</a></h5>
                                        </div>
                                    </div>
                                    <div class="footer-col col-md-4">
                                        <ul class="list-inline">
                                            <li>
                                                <a href="https://twitter.com/java_hipster" target="_blank" class="btn-social btn-outline"><i class="fa fa-fw fa-twitter"></i></a>
                                            </li>
                                            <li>
                                                <a href="https://github.com/jhipster/generator-jhipster" target="_blank" class="btn-social btn-outline"><i class="fa fa-fw fa-github"></i></a>
                                            </li>
                                            <li>
                                                <a href="https://gitter.im/jhipster/generator-jhipster" target="_blank" class="btn-social btn-outline"><i class="fa fa-fw fa-comments"></i></a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="footer-below">
                            <div class="container">
                                <div class="row">
                                    <div class="col-lg-12">
                                        Copyright &copy; JHipster 2017 | Theme based on <a href="https://github.com/IronSummitMedia/startbootstrap-freelancer" target="_blank">Freelancer</a> and <a href="https://github.com/tui2tone/flat-admin-bootstrap-templates" target="_blank">Flat admin</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </footer>
                </div>
                <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
                <div class="scroll-top page-scroll visible-xs visible-sm">
                    <a class="btn btn-primary" href="#page-top">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                </div>
            </div>
            <!-- /#page-wrapper -->
        </div>
        <!-- /#wrapper -->
    </div>
    <!-- Javascript Libs -->
    <script type="text/javascript" src="/documentation-archive/v4.10.2/lib/js/jquery.min.js"></script>
    <script type="text/javascript" src="/documentation-archive/v4.10.2/lib/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/documentation-archive/v4.10.2/lib/js/ace.js"></script>
    <script type="text/javascript" src="/documentation-archive/v4.10.2/lib/js/mode-html.js"></script>
    <script type="text/javascript" src="/documentation-archive/v4.10.2/lib/js/theme-github.js"></script>
    <script type="text/javascript" src="/documentation-archive/v4.10.2/lib/js/jquery.easing.min.js"></script>

    

    <!--App Javascript -->
    <script type="text/javascript" src="/documentation-archive/v4.10.2/js/app.js"></script>
    
    
    
    <!-- JavaScript -->
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-46075199-1', 'www.jhipster.tech');
        ga('send', 'pageview');
    </script>
</body>

</html>
<script>
$(document.body).prepend('<div class="alert alert-danger alert-dismissible fade in" style="z-index: 9999;padding-top: 80px;height: 80;margin:0px;top:0;" role="alert"><h4><i class="fa fa-exclamation-triangle"><\/i> JHipster old documentation<\/h4><p>This documentation is for an older version of JHipster. Click <a href="https://jhipster.github.io/">here</a> for the current version of the documentation.<\/p><\/div>');</script>
