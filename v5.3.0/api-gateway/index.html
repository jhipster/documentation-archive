<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#353d47">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#353d47">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-status-bar-style" content="#353d47">
    <title>API Gateway</title>

    <!-- Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Lato:300,400,700,900' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet" type="text/css">

    <!-- CSS Libs -->
    <link rel="stylesheet" type="text/css" href="/lib/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/lib/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/lib/css/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/lib/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="/lib/css/dataTables.bootstrap.css">
    <!-- CSS App -->
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <link rel="stylesheet" type="text/css" href="/css/themes/flat-blue.css">
    
    <!-- Bootstrap Docs CSS subset to get icon -->
    <!--<link href="/css/bootstrap-docs.css" rel="stylesheet">-->

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Favicon with QHD -->
    <link rel="icon" type="image/png" href="/images/logo/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/images/logo/favicon-16x16.png" sizes="16x16" />
<meta name="robots" content="noindex">
</head>

<body class="flat-blue">
    <div class="app-container expanded ">
        <div class="row content-container">
            <nav class="navbar navbar-inverse navbar-fixed-top navbar-top">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <button type="button" class="navbar-expand-toggle fa-rotate-90">
                            <i class="fa fa-bars icon"></i>
                        </button>
                        <ol class="breadcrumb navbar-breadcrumb">
                            <li class="active"></li>
                        </ol>
                        <button type="button" class="navbar-right-expand-toggle pull-right visible-xs">
                            <i class="fa fa-th icon"></i>
                        </button>
                    </div>
                    <ul class="nav navbar-nav navbar-right">
                        
                        
                        <li class="page-scroll">
                            <a href="/documentation-archive/v5.3.0/sponsors/">Sponsor</a>
                        </li>
                        
                        <li class="">
                            <a href="https://www.google.com/search?q=site:www.jhipster.tech" target="_blank">Search</a>
                        </li>
                        <li>
                            <a href="https://github.com/jhipster/generator-jhipster" class="dropdown-toggle navlink" target="_blank" role="button"><i class="fa fa-github fa-2x"></i></a>
                        </li>
                        <li>
                            <button type="button" class="navbar-right-expand-toggle visible-xs pull-right light">
                                <i class="fa fa-times icon"></i>
                            </button>
                        </li>
                    </ul>

                </div>
            </nav>
            <div class="side-menu sidebar-inverse">
                <nav class="navbar navbar-default" role="navigation">
                    <div class="side-menu-container">
                        <div class="navbar-header">
                            <a class="navbar-brand" href="/">
                                <div class="icon"><img src="/documentation-archive/v5.3.0/images/logo/logo-jhipster.svg" height="50px"></div>
                                <div class="title brand">JHipster </div>
                            </a>
                            <button type="button" class="navbar-expand-toggle pull-right visible-xs">
                                <i class="fa fa-times icon"></i>
                            </button>
                        </div>
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="/">
                                    <span class="icon fa fa-home"></span><span class="title">Home</span>
                                </a>
                            </li>
                            <li >
                                <a href="/documentation-archive/v5.3.0/releases/">
                                    <span class="icon fa fa-file-text-o"></span><span class="title">Release notes</span>
                                </a>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-1">
                                    <span class="icon fa fa-road"></span><span class="title">JHipster in a few minutes</span>
                                </a>
                                <!-- Dropdown level 1 -->
                                <div id="dropdown-1" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v5.3.0/tech-stack/"><i class="fa fa-fw fa-stack-overflow"></i> Technology stack</a></li>
                                            <li ><a href="/presentation" target="_blank"><i class="fa fa-fw fa-desktop"></i> Official JHipster slides</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/screenshots/"><i class="fa fa-fw fa-picture-o"></i> JHipster in 5 screenshots</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/video-tutorial/"><i class="fa fa-fw fa-film"></i> Video tutorial (16 minutes)</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/companies-using-jhipster/"><i class="fa fa-fw fa-thumbs-up"></i> Companies using JHipster</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/showcase/"><i class="fa fa-fw fa-file-image-o"></i> Showcase of JHipster apps</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-2">
                                    <span class="icon fa fa-handshake-o"></span><span class="title">Contributing</span>
                                </a>
                                <!-- Dropdown level 1 -->
                                <div id="dropdown-2" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v5.3.0/sponsors/"><i class="fa fa-fw fa-usd"></i> Financial sponsors</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/contributing-individuals/"><i class="fa fa-fw fa-keyboard-o"></i> Contributing individuals</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/contributing-companies/"><i class="fa fa-fw fa-building"></i> Contributing companies</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-3">
                                    <span class="icon fa fa-fw fa-wrench"></span><span class="title">Setting up your environment</span>
                                </a>
                                <!-- Dropdown level 1 -->
                                <div id="dropdown-3" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v5.3.0/installation/"><i class="fa fa-fw fa-cloud-download"></i> Installing JHipster</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/configuring-a-corporate-proxy/"><i class="fa fa-fw fa-exchange"></i> Configuring a proxy</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/configuring-ide/"><i class="fa fa-fw fa-keyboard-o"></i> Configuring your IDE</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/docker-compose/"><i class="fa fa-fw fa-music"></i> Docker Compose</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/shell-plugins/"><i class="fa fa-fw fa-terminal"></i> Shell Plugins</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-4"><span class="icon fa fa-fw fa-list-ol"></span><span class="title">Core JHipster tasks</span></a>
                                <div id="dropdown-4" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v5.3.0/creating-an-app/"><i class="fa fa-fw fa-rocket"></i> Creating an application</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/creating-an-entity/"><i class="fa fa-fw fa-bolt"></i> Creating an entity</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/creating-a-spring-controller/"><i class="fa fa-fw fa-bolt"></i> Creating a Spring controller</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/creating-a-spring-service/"><i class="fa fa-fw fa-bolt"></i> Creating a Spring service</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/using-dtos/"><i class="fa fa-fw fa-briefcase"></i> Creating DTOs</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/managing-relationships/"><i class="fa fa-fw fa-sitemap"></i> Managing relationships</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/installing-new-languages/"><i class="fa fa-fw fa-flag"></i> Internationalization</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/upgrading-an-application/"><i class="fa fa-fw fa-refresh"></i> Upgrading an application</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-5"><span class="icon fa fa-fw fa-sitemap"></span><span class="title">Microservices</span></a>
                                <div id="dropdown-5" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v5.3.0/microservices-architecture/"><i class="fa fa-fw fa-map-signs"></i> Overview</a></li>
                                            <li class="active" ><a href="/documentation-archive/v5.3.0/api-gateway/"><i class="fa fa-fw fa-exchange"></i> API Gateway</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/traefik/"><i class="fa fa-fw fa-exchange"></i> Traefik</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/jhipster-registry/"><i class="fa fa-fw  fa-dashboard"></i> JHipster Registry</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/consul/"><i class="fa fa-fw fa-bullseye"></i> Consul</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/using-uaa/"><i class="fa fa-fw fa-lock"></i> JHipster UAA</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/creating-microservices/"><i class="fa fa-fw fa-bolt"></i> Creating microservices</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/microservices-in-production/"><i class="fa fa-fw fa-cloud"></i> Microservices in production</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-6"><span class="icon fa fa-fw fa-puzzle-piece"></span><span class="title">Options</span></a>
                                <div id="dropdown-6" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v5.3.0/security/"><i class="fa fa-fw fa-lock"></i> Securing your app</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/entities-filtering/"><i class="fa fa-fw fa-filter"></i> Filtering your entities</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/using-elasticsearch/"><i class="fa fa-fw fa-search"></i> Using Elasticsearch</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/using-websockets/"><i class="fa fa-fw fa-envelope"></i> Using Websockets</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/doing-api-first-development/"><i class="fa fa-fw fa-file-text"></i> Doing API-First development</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/using-cache/"><i class="fa fa-fw fa-line-chart"></i> Using a cache</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/using-oracle/"><i class="fa fa-fw fa-database"></i> Using Oracle</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/using-mongodb/"><i class="fa fa-fw fa-leaf"></i> Using MongoDB</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/using-couchbase/"><i class="fa fa-fw fa-database"></i> Using Couchbase</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/using-cassandra/"><i class="fa fa-fw fa-eye"></i> Using Cassandra</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/using-kafka/"><i class="fa fa-fw fa-envelope"></i> Using Kafka</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-7"><span class="icon fa fa-fw fa-code"></span><span class="title">Development</span></a>
                                <div id="dropdown-7" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v5.3.0/development/"><i class="fa fa-fw fa-code"></i> Using in development</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/profiles/"><i class="fa fa-fw fa-group"></i> Managing profiles</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/common-application-properties/"><i class="fa fa-fw fa-flask"></i> Common application properties</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/separating-front-end-and-api/"><i class="fa fa-fw fa-unlink"></i> Separating front-end and API</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/managing-server-errors/"><i class="fa fa-fw fa-fire-extinguisher"></i> Managing server errors</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/using-angular/"><i class="fa fa-fw fa-html5"></i> Using Angular</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/using-react/"><i class="fa fa-fw fa-html5"></i> Using React</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/customizing-bootstrap-4/"><i class="fa fa-fw fa-css3"></i> Customizing Bootstrap 4</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-8"><span class="icon fa fa-fw fa-umbrella"></span><span class="title">Test &amp; QA</span></a>
                                <div id="dropdown-8" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v5.3.0/running-tests/"><i class="fa fa-fw fa-shield"></i> Running tests</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/code-quality/"><i class="fa fa-fw fa-diamond"></i> Code quality</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/setting-up-ci/"><i class="fa fa-fw fa-stethoscope"></i> Continuous Integration</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-9"><span class="icon fa fa-fw fa-cloud"></span><span class="title">Production</span></a>
                                <div id="dropdown-9" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v5.3.0/production/"><i class="fa fa-fw fa-play-circle"></i> Using in production</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/monitoring/"><i class="fa fa-fw fa-line-chart"></i> Monitoring</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/docker-hub/"><i class="fa fa-fw fa-cloud-upload"></i> Docker Hub</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/kubernetes/"><i class="fa fa-fw fa-cloud-upload"></i> Deploying to Kubernetes</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/openshift/"><i class="fa fa-fw fa-cloud-upload"></i> Deploying to OpenShift</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/heroku/"><i class="fa fa-fw fa-cloud-upload"></i> Deploying to Heroku</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/cloudfoundry/"><i class="fa fa-fw fa-cloud-upload"></i> Deploying to Cloud Foundry</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/aws/"><i class="fa fa-fw fa-cloud-upload"></i> Deploying to AWS</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/azure/"><i class="fa fa-fw fa-cloud-upload"></i> Deploying to Azure</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/rancher/"><i class="fa fa-fw fa-cloud-upload"></i> Deploying to Rancher</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/boxfuse/"><i class="fa fa-fw fa-cloud-upload"></i> Deploying with Boxfuse</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-10"><span class="icon fa fa-fw fa-cubes"></span><span class="title">Modules &amp; Blueprints</span></a>
                                <div id="dropdown-10" class="panel-collapse collapse" style="height: 0px;">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v5.3.0/modules/marketplace/"><i class="fa fa-fw fa-shopping-cart"></i> Marketplace</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/modules/creating-a-module/"><i class="fa fa-fw fa-cube"></i> Creating a module</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/modules/creating-a-blueprint/"><i class="fa fa-fw fa-cube"></i> Creating a blueprint</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-11"><span class="icon fa fa-fw fa-wrench"></span><span class="title">Tools</span></a>
                                <div id="dropdown-11" class="panel-collapse collapse" style="height: 0px;">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v5.3.0/jdl/"><i class="fa fa-fw fa-star"></i> JDL</a></li>
                                            <li><a href="https://start.jhipster.tech/jdl-studio/"><i class="fa fa-fw fa-terminal"></i> JDL Studio</a></li>
                                            <li >
                                                <a href="/documentation-archive/v5.3.0/jhipster-ide/"><i class="fa fa-fw fa-object-group"></i> JHipster IDE</a></li>
                                            <li >
                                                <a href="/documentation-archive/v5.3.0/jhipster-uml/"><i class="fa fa-fw fa-magic"></i> JHipster-UML</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </li>

                            <li class="panel panel-default dropdown">
                                <a data-toggle="collapse" href="#dropdown-12"><span class="icon fa fa-fw fa-question"></span><span class="title">Getting help</span></a>
                                <div id="dropdown-12" class="panel-collapse collapse" style="height: 0px;">
                                    <div class="panel-body">
                                        <ul class="nav navbar-nav">
                                            <li ><a href="/documentation-archive/v5.3.0/help/"><i class="fa fa-fw fa-users"></i> Community help</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/bug-bounties/"><i class="fa fa-fw fa-usd"></i> Bug bounties</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/consulting/"><i class="fa fa-fw fa-user-md"></i> Professional help</a></li>
                                            <li ><a href="/documentation-archive/v5.3.0/training/"><i class="fa fa-fw fa-graduation-cap"></i> Training</a></li>
                                        </ul>
                                     </div>
                                </div>
                            </li>
                            <li ><a href="/documentation-archive/v5.3.0/tips/"><span class="icon fa fa-fw fa-cogs"></span><span class="title">Tips'n tricks</span></a></li>
                        </ul>
                    </div>
                    <!-- /.navbar-collapse -->
                </nav>
            </div>
            <!-- Main Content -->
            <div id="page-wrapper" class="container-fluid">
                <div class="side-body" id="page-top">
                    
                    <div class="row page-content-wrapper">
                        <div class="col-lg-12">
                            <h1 id="-the-jhipster-api-gateway"><i class="fa fa-exchange"></i> The JHipster API Gateway</h1>

<p>JHipster can generate API gateways. A gateway is a normal JHipster application, so you can use the usual JHipster options and development workflows on that project, but it also acts as the entrance to your microservices. More specifically, it provides HTTP routing and load balancing, quality of service, security and API documentation for all microservices.</p>

<h2 id="summary">Summary</h2>

<ol>
  <li><a href="#architecture_diagram">Architecture diagram</a></li>
  <li><a href="#http_routing">HTTP routing</a></li>
  <li><a href="#security">Security</a></li>
  <li><a href="#documentation">Automatic documentation</a></li>
  <li><a href="#rate_limiting">Rate limiting</a></li>
  <li><a href="#acl">Access control policy</a></li>
</ol>

<h2 id="-architecture-diagram"><a name="architecture_diagram"></a> Architecture diagram</h2>

<p><img src="/documentation-archive/v5.3.0/images/microservices_architecture_detail.001.png" alt="Diagram" style="width: 800; height: 600" class="img-responsive" /></p>

<h2 id="-http-requests-routing-using-the-gateway"><a name="http_routing"></a> HTTP requests routing using the gateway</h2>

<p>When the gateways and the microservices are launched, they will register themselves in the registry (using the <code class="highlighter-rouge">eureka.client.serviceUrl.defaultZone</code> key in the <code class="highlighter-rouge">src/main/resources/config/application.yml</code> file).</p>

<p>The gateway will automatically proxy all requests to the microservices, using their application name: for example, when microservices <code class="highlighter-rouge">app1</code> is registered, it is available on the gateway on the <code class="highlighter-rouge">/app1</code> URL.</p>

<p>For example, if your gateway is running on <code class="highlighter-rouge">localhost:8080</code>, you could point to <a href="http://localhost:8080/app1/rest/foos">http://localhost:8080/app1/rest/foos</a> to
get the <code class="highlighter-rouge">foos</code> resource served by microservice <code class="highlighter-rouge">app1</code>. If you’re trying to do this with your Web browser, don’t forget REST resources are secured by default in JHipster, so you need to send the correct JWT header (see the point on security below), or remove the security on those URLs in the microservice’s <code class="highlighter-rouge">MicroserviceSecurityConfiguration</code> class.</p>

<p>If there are several instances of the same service running, the gateway will get those instances from the JHipster Registry, and will:</p>

<ul>
  <li>Load balance HTTP requests using <a href="https://github.com/Netflix/ribbon">Netflix Ribbon</a>.</li>
  <li>Provide a circuit breaker using <a href="https://github.com/Netflix/hystrix">Netflix Hystrix</a>, so that failed instances are quickly and safely removed.</li>
</ul>

<p>Each gateway has a specific “admin &gt; gateway” menu, where opened HTTP routes and microservices instances can be monitored.</p>

<h2 id="-security"><a name="security"></a> Security</h2>

<p>Standard JHipster security options are detailed on <a href="/documentation-archive/v5.3.0/security/">this security documentation page</a>. However, securing a microservice architecture has some specific tunings and options, which are detailed here.</p>

<h3 id="jwt-json-web-token">JWT (JSON Web Token)</h3>

<p>JWT (JSON Web Token) is an industry standard, easy-to-use method for securing applications in a microservices architecture.</p>

<p>JHipster uses the <a href="https://github.com/jwtk/jjwt">JJWT library</a>, provided by Okta, for implementing JWT.</p>

<p>Tokens are generated by the gateway, and sent to the underlying microservices: as they share a common secret key, microservices are able to validate the token, and authenticate users using that token.</p>

<p>Those tokens are self-sufficient: they have both authentication and authorization information, so microservices do not need to query a database or an external system. This is important in order to ensure a scalable architecture.</p>

<p>For security to work, a JWT secret token must be shared between all applications.</p>

<ul>
  <li>For each application the default token is unique, and generated by JHipster. It is stored in the <code class="highlighter-rouge">.yo-rc.json</code> file.</li>
  <li>Tokens are configured with the <code class="highlighter-rouge">jhipster.security.authentication.jwt.secret</code> key in the <code class="highlighter-rouge">src/main/resources/config/application.yml</code> file.</li>
  <li>To share this key between all your applications, copy the key from your gateway to all the microservices, or share it using the <a href="/documentation-archive/v5.3.0/jhipster-registry/">JHipster Registry</a>’s Spring Config Server or <a href="/documentation-archive/v5.3.0/consul/">JHipster’s specific configuration of the Consul K/V store</a>. This is one of the main reasons why people use those central configuration servers.</li>
  <li>A good practice is to have a different key in development and production.</li>
</ul>

<h3 id="openid-connect">OpenID Connect</h3>

<p>JHipster provides OpenID Connect support, as detailed <a href="/documentation-archive/v5.3.0/security/#oauth2">in our OpenID Connect documentation</a>.</p>

<p>When selecting this option, you will use Keycloak by default, and you will probably want to run your complete microservice architecture using Docker Compose: be sure to read our <a href="/documentation-archive/v5.3.0/docker-compose/">Docker Compose documentation</a>, and configure correctly your <code class="highlighter-rouge">/etc/hosts</code> for Keycloak.</p>

<p>When using OpenID Connect, the JHipster gateway will send OAuth2 tokens to microservices, which will accept those tokens as they are also connected to Keycloak.</p>

<p>Unlike JWT, those tokens are not self-sufficient, and should be stateful, which causes 2 main issues:</p>

<ul>
  <li>A performance issue in microservices: as it is very common to look for the current user’s security information (otherwise we wouldn’t be using any security option from the beginning), each microservice will call the OpenID Connect server to get that data. So in a normal setup, those calls will be made by each microservice, each time they get a request, and this will quickly cause a performance issue.
    <ul>
      <li>If you have selected a caching option (<a href="/documentation-archive/v5.3.0/using-cache/">here is the “Using a cache” documentation</a>) when generating your JHipster microservice, a specific <code class="highlighter-rouge">CachedUserInfoTokenServices</code> Spring Bean will be generated, which will cache those calls. When properly tuned, this will remove the performance issue.</li>
      <li>If you want more information on this “user info” request, it is configured using the standard Spring Boot configuration key <code class="highlighter-rouge">security.oauth2.resource.userInfoUri</code> in your <code class="highlighter-rouge">src/main/resources/application.yml</code> configuration file.</li>
    </ul>
  </li>
  <li>Authentication is not automatically synchronized between the application and Keycloak. Please note that this the standard OpenID Connect workflow, and that we expect to do some specific improvements in JHipster on this matter. As a result:
    <ul>
      <li>When a user logs out of the application, he will be automatically logged in again if he refreshes his browser: this is because he is still logged in Keycloak, which provides automatic authentication.</li>
      <li>When a user’s session is invalidated in Keycloak, if the user is already logged into the application, he will still be able to use the application for a while. This is because OpenID Connect is a stateful mechanism, and the application doesn’t know immediately that the session has been invalidated.</li>
    </ul>
  </li>
</ul>

<h3 id="jhipster-uaa">JHipster UAA</h3>

<p>JHipster provides the option to generate a “UAA” (User Account and Authentication) server, based on Spring Security. This server provides OAuth2 tokens for securing the gateway.</p>

<p>You will find all UAA-related information on our specific <a href="/documentation-archive/v5.3.0/using-uaa/">JHipster UAA documentation</a>.</p>

<p>Then, the gateway uses Spring Security’s JWT implementation to send JWT tokens to the microservices, so this works basically the same as with the JWT configuration detailed above.</p>

<h2 id="-automatic-documentation"><a name="documentation"></a> Automatic documentation</h2>

<p>The gateway exposes the Swagger API definitions of the services it proxifies so you can benefit from all useful tools like Swagger UI and swagger-codegen.</p>

<p>The “admin &gt; API” menu of a gateway has a specific drop-down list, showing the gateway’s API and all the APIs from the registered microservices.</p>

<p>Using this drop-down list, all microservices APIs are automatically documented, and testable from the gateway.</p>

<p>When using a secured API, security tokens are automatically added to the Swagger UI interface, so all requests work out-of-the-box.</p>

<h2 id="-rate-limiting"><a name="rate_limiting"></a> Rate limiting</h2>

<p>This is an advanced feature that uses <a href="https://github.com/vladimir-bukhtoyarov/bucket4j">Bucket4j</a> and <a href="https://hazelcast.com/">Hazelcast</a> to provide quality of service on microservices.</p>

<p>Gateways provide rate-limiting features, so the number of REST requests can be limited:</p>

<ul>
  <li>by IP address (for anonymous users)</li>
  <li>by user login (for logged-in users)</li>
</ul>

<p>JHipster will then use <a href="https://github.com/vladimir-bukhtoyarov/bucket4j">Bucket4j</a> and <a href="https://hazelcast.com/">Hazelcast</a> to calculate request counts, and will send HTTP 429 (too many requests) errors when the limit is exceeded. The default limit per user is 100,000 API calls per hour.</p>

<p>This is an important feature, to protect a microservice architecture from being flooded by a specific user’s requests.</p>

<p>As the gateway secures the REST endpoints, it has full access to the user’s security information, so it can be easily extended to provide specific rate limits depending on the user’s security roles.</p>

<p>To enable rate limiting, open up the <code class="highlighter-rouge">application-dev.yml</code> or <code class="highlighter-rouge">application-prod.yml</code> file and set <code class="highlighter-rouge">enabled</code> to <code class="highlighter-rouge">true</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jhipster:
    gateway:
        rate-limiting:
            enabled: true
</code></pre></div></div>

<p>Data is stored in Hazelcast, so it is possible to scale gateways as long as the Hazelcast distributed cache is configured, which should work out-of-the-box:</p>

<ul>
  <li>All gateways have Hazelcast configured by default</li>
  <li>If you use the <a href="/documentation-archive/v5.3.0/jhipster-registry/">JHipster Registry</a>, all instances of a gateway should automatically register themselves in a distributed cache</li>
</ul>

<p>If you want to add more rules, or modify the existing rules, you need to code them in the <code class="highlighter-rouge">RateLimitingFilter</code> class. Examples of modifications could be:</p>

<ul>
  <li>Lowering the limit of HTTP calls</li>
  <li>Adding limits per minute or per day</li>
  <li>Removing all limits for “admin” users</li>
</ul>

<h2 id="-access-control-policy"><a name="acl"></a> Access control policy</h2>

<p>By default all registered microservices are available through the gateway. If you want to exclude a specific API from being exposed through the gateway, you can use the gateway’s specific access control policy filter. It is configurable using the <code class="highlighter-rouge">jhipster.gateway.authorized-microservices-endpoints</code> key in the <code class="highlighter-rouge">application-*.yml</code> files:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jhipster:
    gateway:
        authorized-microservices-endpoints: # Access Control Policy, if left empty for a route, all endpoints will be accessible
            app1: /api,/v2/api-docs # recommended dev configuration
</code></pre></div></div>

<p>For example, if you only want the <code class="highlighter-rouge">/api/foo</code> endpoint of microservice <code class="highlighter-rouge">bar</code> to be available:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jhipster:
    gateway:
        authorized-microservices-endpoints:
            bar: /api/foo
</code></pre></div></div>

                        </div>
                    </div>
                    <!-- /.row -->
                    

                    <!-- Footer -->
                    <footer class="text-center">
                        
                        <hr>
                        <div class="footer-logos">
                            <div class="container">
                                <div class="row">
                                    <div class="col-12">
                                        JHipster is sponsored by:
                                    </div>
                                    <!-- change to below commented line when adding more logos -->
                                    <!-- <div class="col-xs-12 col-sm-6 col-md-4"> -->
                                    <div class="col-md-offset-4 col-sm-12 col-md-4">
                                        <div class="thumbnail no-margin-bottom">
                                            <div class="logo-container">
                                                <a href="https://developer.okta.com/signup?utm_source=JHipster&utm_medium=logo&utm_campaign=Gold-Sponsor" target="_blank"><img src="/documentation-archive/v5.3.0/images/open-collective/okta.png" width="320px" height="108px"></a>
                                            </div>
                                        </div>
                                    </div>
                                    <!--
                                    <div class="col-xs-12 col-sm-6 col-md-4">
                                        <div class="thumbnail no-margin-bottom">
                                            <div class="logo-container">
                                                <a href="https://developer.okta.com/signup?utm_source=JHipster&utm_medium=logo&utm_campaign=Gold-Sponsor" target="_blank"><img src="/documentation-archive/v5.3.0/images/open-collective/okta.png" width="320px" height="108px"></a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-6 col-md-4">
                                        <div class="thumbnail no-margin-bottom">
                                            <div class="logo-container">
                                                <a href="https://developer.okta.com/signup?utm_source=JHipster&utm_medium=logo&utm_campaign=Gold-Sponsor" target="_blank"><img src="/documentation-archive/v5.3.0/images/open-collective/okta.png" width="320px" height="108px"></a>
                                            </div>
                                        </div>
                                    </div>
                                    -->
                                </div>
                            </div>
                        </div>
                        
                        <div class="footer-above">
                            <div class="container">
                                <div class="row">
                                    <div class="footer-col col-md-4">
                                        <div class="col-md-4 col-sm-12">
                                            <h5 class="text-left"><i class="fa fa-coffee fa-fw"></i> <a class="link" href="/documentation-archive/v5.3.0/team/">Team</a></h5>
                                            <h5 class="text-left"><i class="fa fa-pencil fa-fw"></i> <a class="link" href="/documentation-archive/v5.3.0/artwork/">Artwork</a></h5>
                                        </div>
                                        <div class="col-md-4 col-sm-12">
                                            <h5 class="text-left"><i class="fa fa-gavel fa-fw"></i> <a class="link" href="/documentation-archive/v5.3.0/policies/">Policies</a></h5>
                                            <h5 class="text-left"><i class="fa fa-meetup fa-fw"></i> <a class="link" href="/documentation-archive/v5.3.0/meetups/">Meetups</a></h5>
                                        </div>
                                        <div class="col-md-4 col-sm-12">
                                            <h5 class="text-left"><i class="fa fa-database fa-fw"></i> <a class="link" href="/documentation-archive/v5.3.0/documentation-archive/">Archives</a></h5>
                                        </div>
                                    </div>
                                    <div class="footer-col col-md-4">
                                        <ul class="list-inline">
                                            <li>
                                                <a href="https://twitter.com/java_hipster" target="_blank" class="btn-social btn-outline"><i class="fa fa-fw fa-twitter"></i></a>
                                            </li>
                                            <li>
                                                <a href="https://github.com/jhipster/generator-jhipster" target="_blank" class="btn-social btn-outline"><i class="fa fa-fw fa-github"></i></a>
                                            </li>
                                            <li>
                                                <a href="https://gitter.im/jhipster/generator-jhipster" target="_blank" class="btn-social btn-outline"><i class="fa fa-fw fa-comments"></i></a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="footer-below">
                            <div class="container">
                                <div class="row">
                                    <div class="col-lg-12">
                                        Copyright &copy; JHipster 2013-2018 | Theme based on <a href="https://github.com/IronSummitMedia/startbootstrap-freelancer" target="_blank">Freelancer</a> and <a href="https://github.com/tui2tone/flat-admin-bootstrap-templates" target="_blank">Flat admin</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </footer>
                </div>
                <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
                <div class="scroll-top page-scroll visible-xs visible-sm">
                    <a class="btn btn-primary" href="#page-top">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                </div>
            </div>
            <!-- /#page-wrapper -->
        </div>
        <!-- /#wrapper -->
    </div>
    <!-- Javascript Libs -->
    <script type="text/javascript" src="/documentation-archive/v5.3.0/lib/js/jquery.min.js"></script>
    <script type="text/javascript" src="/documentation-archive/v5.3.0/lib/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/documentation-archive/v5.3.0/lib/js/ace.js"></script>
    <script type="text/javascript" src="/documentation-archive/v5.3.0/lib/js/mode-html.js"></script>
    <script type="text/javascript" src="/documentation-archive/v5.3.0/lib/js/theme-github.js"></script>
    <script type="text/javascript" src="/documentation-archive/v5.3.0/lib/js/jquery.easing.min.js"></script>

    

    <!--App Javascript -->
    <script type="text/javascript" src="/documentation-archive/v5.3.0/js/app.js"></script>
    
    
    
    <script>
    if (self !== top) {
        window.top.location.href = "https://www.jhipster.tech";
    }
    </script>
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-46075199-1', 'auto');
        ga('send', 'pageview');
    </script>
</body>

</html>
<script>
$(document.body).prepend('<div class="alert alert-danger alert-dismissible fade in" style="z-index: 9999;padding-top: 80px;height: 80;margin:0px;top:0;" role="alert"><h4><i class="fa fa-exclamation-triangle"><\/i> JHipster old documentation<\/h4><p>This documentation is for an older version of JHipster. Click <a href="https://jhipster.github.io/">here</a> for the current version of the documentation.<\/p><\/div>');</script>
